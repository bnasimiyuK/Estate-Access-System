{
    "sourceFile": "frontend/js/residentsdashboard.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1763977206102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763978787841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,69 +1,93 @@\n // residentsdashboard.js\n-// --------------------\n-// Handles dynamic content loading, sidebar navigation, and card updates\n+// Resident Dashboard JS\n \n-const mainContent = document.getElementById(\"dynamic-section-content\");\n+// -----------------------------\n+// DOM Elements\n+// -----------------------------\n+const mainContent = document.getElementById(\"main-content-area\");\n const sidebarBtns = document.querySelectorAll(\".sidebarBtn\");\n+const logoutBtn = document.getElementById(\"logoutBtn\");\n \n // Dashboard cards\n const paymentStatusCard = document.getElementById(\"paymentStatusCard\");\n const activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\n const lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\n const residentAlerts = document.getElementById(\"residentAlerts\");\n \n-// Load default dashboard overview on page load\n-document.addEventListener(\"DOMContentLoaded\", () => {\n-  loadSection(\"sections/resident-overview.html\");\n-  fetchDashboardCards();\n-});\n-\n-// Sidebar button click event\n-sidebarBtns.forEach(btn => {\n+// -----------------------------\n+// Sidebar navigation\n+// -----------------------------\n+sidebarBtns.forEach((btn) => {\n   btn.addEventListener(\"click\", () => {\n-    const target = btn.getAttribute(\"data-target\");\n+    const target = btn.dataset.target;\n     loadSection(target);\n-\n+    \n     // Highlight active button\n-    sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\", \"shadow-inner\"));\n-    btn.classList.add(\"bg-blue-600\", \"shadow-inner\");\n+    sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\"));\n+    btn.classList.add(\"bg-blue-600\");\n   });\n });\n \n-// Function to load section HTML dynamically\n+// -----------------------------\n+// Load section into main content\n+// -----------------------------\n async function loadSection(url) {\n   try {\n-    const response = await fetch(url);\n-    if (!response.ok) throw new Error(`Failed to load ${url}`);\n-    const html = await response.text();\n-    mainContent.innerHTML = html;\n+    const res = await fetch(url);\n+    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n+    const html = await res.text();\n+    const dynamicContent = mainContent.querySelector(\"#dynamic-section-content\");\n+    dynamicContent.innerHTML = html;\n   } catch (error) {\n-    mainContent.innerHTML = `<p class=\"text-red-600 text-center font-semibold\">Error loading section: ${error.message}</p>`;\n-    console.error(error);\n+    console.error(`Error: Failed to load ${url}`, error);\n+    const dynamicContent = mainContent.querySelector(\"#dynamic-section-content\");\n+    dynamicContent.innerHTML = `<p class=\"text-red-500 text-center\">Failed to load content.</p>`;\n   }\n }\n \n-// Function to fetch and update dashboard cards\n+// -----------------------------\n+// Fetch and populate dashboard cards\n+// -----------------------------\n async function fetchDashboardCards() {\n   try {\n-    // Replace these endpoints with your actual API\n-    const [paymentRes, visitorRes, accessRes, alertsRes] = await Promise.all([\n-      axios.get(\"/api/resident/payment-status\"),\n-      axios.get(\"/api/resident/active-visitor-passes\"),\n-      axios.get(\"/api/resident/last-access-attempts\"),\n-      axios.get(\"/api/resident/notifications\")\n-    ]);\n+    // Replace below mock data with real API calls\n+    const dashboardData = {\n+      paymentStatus: \"Paid\",\n+      activeVisitorPasses: 3,\n+      lastAccessAttempts: 5,\n+      notifications: 1\n+    };\n \n-    paymentStatusCard.textContent = paymentRes.data.status || \"N/A\";\n-    activeVisitorPasses.textContent = visitorRes.data.count || 0;\n-    lastAccessAttempts.textContent = accessRes.data.count || 0;\n-    residentAlerts.textContent = alertsRes.data.count || 0;\n+    paymentStatusCard.textContent = dashboardData.paymentStatus;\n+    activeVisitorPasses.textContent = dashboardData.activeVisitorPasses;\n+    lastAccessAttempts.textContent = dashboardData.lastAccessAttempts;\n+    residentAlerts.textContent = dashboardData.notifications;\n+\n   } catch (error) {\n     console.error(\"Error fetching dashboard cards:\", error);\n   }\n }\n \n-// Logout button\n-document.getElementById(\"logoutBtn\").addEventListener(\"click\", () => {\n-  localStorage.removeItem(\"residentToken\"); // Assuming token is stored here\n-  window.location.href = \"/login.html\";\n+// -----------------------------\n+// Logout handler\n+// -----------------------------\n+logoutBtn.addEventListener(\"click\", () => {\n+  // Clear session or token if using authentication\n+  localStorage.removeItem(\"residentToken\");\n+  window.location.href = \"/login.html\"; // redirect to login page\n });\n+\n+// -----------------------------\n+// Initialize dashboard\n+// -----------------------------\n+function initDashboard() {\n+  fetchDashboardCards();\n+\n+  // Load default section\n+  const firstSection = sidebarBtns[0].dataset.target;\n+  loadSection(firstSection);\n+  sidebarBtns[0].classList.add(\"bg-blue-600\");\n+}\n+\n+// Initialize on DOMContentLoaded\n+document.addEventListener(\"DOMContentLoaded\", initDashboard);\n"
                },
                {
                    "date": 1763979224119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,5 @@\n // residentsdashboard.js\n-// Resident Dashboard JS\n \n // -----------------------------\n // DOM Elements\n // -----------------------------\n@@ -11,32 +10,32 @@\n // Dashboard cards\n const paymentStatusCard = document.getElementById(\"paymentStatusCard\");\n const activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\n const lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\n-const residentAlerts = document.getElementById(\"residentAlerts\");\n \n // -----------------------------\n-// Sidebar navigation\n+// Sidebar Navigation\n // -----------------------------\n-sidebarBtns.forEach((btn) => {\n+sidebarBtns.forEach(btn => {\n   btn.addEventListener(\"click\", () => {\n     const target = btn.dataset.target;\n     loadSection(target);\n-    \n-    // Highlight active button\n+\n+    // Highlight active sidebar button\n     sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\"));\n     btn.classList.add(\"bg-blue-600\");\n   });\n });\n \n // -----------------------------\n-// Load section into main content\n+// Load section HTML dynamically\n // -----------------------------\n async function loadSection(url) {\n   try {\n     const res = await fetch(url);\n     if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n     const html = await res.text();\n+\n     const dynamicContent = mainContent.querySelector(\"#dynamic-section-content\");\n     dynamicContent.innerHTML = html;\n   } catch (error) {\n     console.error(`Error: Failed to load ${url}`, error);\n@@ -45,25 +44,22 @@\n   }\n }\n \n // -----------------------------\n-// Fetch and populate dashboard cards\n+// Fetch & update dashboard cards\n // -----------------------------\n async function fetchDashboardCards() {\n   try {\n-    // Replace below mock data with real API calls\n-    const dashboardData = {\n+    // Mock data; replace with your API calls\n+    const data = {\n       paymentStatus: \"Paid\",\n       activeVisitorPasses: 3,\n-      lastAccessAttempts: 5,\n-      notifications: 1\n+      lastAccessAttempts: 5\n     };\n \n-    paymentStatusCard.textContent = dashboardData.paymentStatus;\n-    activeVisitorPasses.textContent = dashboardData.activeVisitorPasses;\n-    lastAccessAttempts.textContent = dashboardData.lastAccessAttempts;\n-    residentAlerts.textContent = dashboardData.notifications;\n-\n+    paymentStatusCard.textContent = data.paymentStatus;\n+    activeVisitorPasses.textContent = data.activeVisitorPasses;\n+    lastAccessAttempts.textContent = data.lastAccessAttempts;\n   } catch (error) {\n     console.error(\"Error fetching dashboard cards:\", error);\n   }\n }\n@@ -71,10 +67,9 @@\n // -----------------------------\n // Logout handler\n // -----------------------------\n logoutBtn.addEventListener(\"click\", () => {\n-  // Clear session or token if using authentication\n-  localStorage.removeItem(\"residentToken\");\n+  localStorage.removeItem(\"residentToken\"); // remove session token if any\n   window.location.href = \"/login.html\"; // redirect to login page\n });\n \n // -----------------------------\n@@ -88,6 +83,6 @@\n   loadSection(firstSection);\n   sidebarBtns[0].classList.add(\"bg-blue-600\");\n }\n \n-// Initialize on DOMContentLoaded\n+// Initialize when DOM is ready\n document.addEventListener(\"DOMContentLoaded\", initDashboard);\n"
                },
                {
                    "date": 1763980016874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n // -----------------------------\n // DOM Elements\n // -----------------------------\n const mainContent = document.getElementById(\"main-content-area\");\n+const dynamicContent = document.getElementById(\"dynamic-section-content\");\n const sidebarBtns = document.querySelectorAll(\".sidebarBtn\");\n const logoutBtn = document.getElementById(\"logoutBtn\");\n \n // Dashboard cards\n@@ -34,13 +35,12 @@\n     const res = await fetch(url);\n     if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n     const html = await res.text();\n \n-    const dynamicContent = mainContent.querySelector(\"#dynamic-section-content\");\n+    // Replace only the dynamic section content\n     dynamicContent.innerHTML = html;\n   } catch (error) {\n     console.error(`Error: Failed to load ${url}`, error);\n-    const dynamicContent = mainContent.querySelector(\"#dynamic-section-content\");\n     dynamicContent.innerHTML = `<p class=\"text-red-500 text-center\">Failed to load content.</p>`;\n   }\n }\n \n@@ -48,9 +48,9 @@\n // Fetch & update dashboard cards\n // -----------------------------\n async function fetchDashboardCards() {\n   try {\n-    // Mock data; replace with your API calls\n+    // TODO: Replace mock data with API calls\n     const data = {\n       paymentStatus: \"Paid\",\n       activeVisitorPasses: 3,\n       lastAccessAttempts: 5\n@@ -77,12 +77,13 @@\n // -----------------------------\n function initDashboard() {\n   fetchDashboardCards();\n \n-  // Load default section\n-  const firstSection = sidebarBtns[0].dataset.target;\n+  // Load default section (first sidebar button)\n+  const firstSectionBtn = sidebarBtns[0];\n+  const firstSection = firstSectionBtn.dataset.target;\n   loadSection(firstSection);\n-  sidebarBtns[0].classList.add(\"bg-blue-600\");\n+  firstSectionBtn.classList.add(\"bg-blue-600\");\n }\n \n // Initialize when DOM is ready\n document.addEventListener(\"DOMContentLoaded\", initDashboard);\n"
                },
                {
                    "date": 1763980221525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,4 @@\n-// residentsdashboard.js\n-\n // -----------------------------\n // DOM Elements\n // -----------------------------\n const mainContent = document.getElementById(\"main-content-area\");\n@@ -11,8 +9,9 @@\n // Dashboard cards\n const paymentStatusCard = document.getElementById(\"paymentStatusCard\");\n const activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\n const lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\n+const residentAlerts = document.getElementById(\"residentAlerts\");\n \n // -----------------------------\n // Sidebar Navigation\n // -----------------------------\n@@ -34,11 +33,9 @@\n   try {\n     const res = await fetch(url);\n     if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n     const html = await res.text();\n-\n-    // Replace only the dynamic section content\n-    dynamicContent.innerHTML = html;\n+    dynamicContent.innerHTML = html; // Only replace dynamic section\n   } catch (error) {\n     console.error(`Error: Failed to load ${url}`, error);\n     dynamicContent.innerHTML = `<p class=\"text-red-500 text-center\">Failed to load content.</p>`;\n   }\n@@ -48,18 +45,20 @@\n // Fetch & update dashboard cards\n // -----------------------------\n async function fetchDashboardCards() {\n   try {\n-    // TODO: Replace mock data with API calls\n+    // Replace with real API call\n     const data = {\n       paymentStatus: \"Paid\",\n       activeVisitorPasses: 3,\n-      lastAccessAttempts: 5\n+      lastAccessAttempts: 5,\n+      residentAlerts: 2\n     };\n \n     paymentStatusCard.textContent = data.paymentStatus;\n     activeVisitorPasses.textContent = data.activeVisitorPasses;\n     lastAccessAttempts.textContent = data.lastAccessAttempts;\n+    residentAlerts.textContent = data.residentAlerts;\n   } catch (error) {\n     console.error(\"Error fetching dashboard cards:\", error);\n   }\n }\n@@ -67,23 +66,21 @@\n // -----------------------------\n // Logout handler\n // -----------------------------\n logoutBtn.addEventListener(\"click\", () => {\n-  localStorage.removeItem(\"residentToken\"); // remove session token if any\n-  window.location.href = \"/login.html\"; // redirect to login page\n+  localStorage.removeItem(\"residentToken\");\n+  window.location.href = \"/login.html\";\n });\n \n // -----------------------------\n // Initialize dashboard\n // -----------------------------\n function initDashboard() {\n   fetchDashboardCards();\n \n-  // Load default section (first sidebar button)\n-  const firstSectionBtn = sidebarBtns[0];\n-  const firstSection = firstSectionBtn.dataset.target;\n+  // Load default section (Dashboard Overview)\n+  const firstSection = sidebarBtns[0].dataset.target;\n   loadSection(firstSection);\n-  firstSectionBtn.classList.add(\"bg-blue-600\");\n+  sidebarBtns[0].classList.add(\"bg-blue-600\");\n }\n \n-// Initialize when DOM is ready\n document.addEventListener(\"DOMContentLoaded\", initDashboard);\n"
                },
                {
                    "date": 1763980765841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,86 +1,82 @@\n // -----------------------------\n // DOM Elements\n // -----------------------------\n-const mainContent = document.getElementById(\"main-content-area\");\n-const dynamicContent = document.getElementById(\"dynamic-section-content\");\n-const sidebarBtns = document.querySelectorAll(\".sidebarBtn\");\n-const logoutBtn = document.getElementById(\"logoutBtn\");\n+const currentPaymentStatus = document.getElementById(\"currentPaymentStatus\");\n+const nextPaymentDueDate = document.getElementById(\"nextPaymentDueDate\");\n+const accessPrivileges = document.getElementById(\"accessPrivileges\");\n \n-// Dashboard cards\n-const paymentStatusCard = document.getElementById(\"paymentStatusCard\");\n-const activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\n-const lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\n-const residentAlerts = document.getElementById(\"residentAlerts\");\n+// Optional chart element\n+const accessChartEl = document.getElementById(\"accessChart\");\n \n // -----------------------------\n-// Sidebar Navigation\n+// Fetch resident overview data\n // -----------------------------\n-sidebarBtns.forEach(btn => {\n-  btn.addEventListener(\"click\", () => {\n-    const target = btn.dataset.target;\n-    loadSection(target);\n-\n-    // Highlight active sidebar button\n-    sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\"));\n-    btn.classList.add(\"bg-blue-600\");\n-  });\n-});\n-\n-// -----------------------------\n-// Load section HTML dynamically\n-// -----------------------------\n-async function loadSection(url) {\n+async function fetchResidentOverview() {\n   try {\n-    const res = await fetch(url);\n-    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n-    const html = await res.text();\n-    dynamicContent.innerHTML = html; // Only replace dynamic section\n-  } catch (error) {\n-    console.error(`Error: Failed to load ${url}`, error);\n-    dynamicContent.innerHTML = `<p class=\"text-red-500 text-center\">Failed to load content.</p>`;\n-  }\n-}\n+    // Replace this with real API call if available\n+    // const response = await axios.get(\"/api/resident/overview\");\n+    // const data = response.data;\n \n-// -----------------------------\n-// Fetch & update dashboard cards\n-// -----------------------------\n-async function fetchDashboardCards() {\n-  try {\n-    // Replace with real API call\n+    // Mock data for demonstration\n     const data = {\n-      paymentStatus: \"Paid\",\n-      activeVisitorPasses: 3,\n-      lastAccessAttempts: 5,\n-      residentAlerts: 2\n+      currentPaymentStatus: \"Paid\",\n+      nextPaymentDueDate: \"2025-12-10\",\n+      accessPrivileges: \"100%\"\n     };\n \n-    paymentStatusCard.textContent = data.paymentStatus;\n-    activeVisitorPasses.textContent = data.activeVisitorPasses;\n-    lastAccessAttempts.textContent = data.lastAccessAttempts;\n-    residentAlerts.textContent = data.residentAlerts;\n+    // Update the DOM\n+    currentPaymentStatus.textContent = data.currentPaymentStatus;\n+    nextPaymentDueDate.textContent = data.nextPaymentDueDate;\n+    accessPrivileges.textContent = data.accessPrivileges;\n+\n   } catch (error) {\n-    console.error(\"Error fetching dashboard cards:\", error);\n+    console.error(\"Error fetching resident overview data:\", error);\n+\n+    currentPaymentStatus.textContent = \"Error\";\n+    nextPaymentDueDate.textContent = \"Error\";\n+    accessPrivileges.textContent = \"Error\";\n   }\n }\n \n // -----------------------------\n-// Logout handler\n+// Optional: Render access chart\n // -----------------------------\n-logoutBtn.addEventListener(\"click\", () => {\n-  localStorage.removeItem(\"residentToken\");\n-  window.location.href = \"/login.html\";\n-});\n+function renderAccessChart() {\n+  if (!accessChartEl) return;\n \n-// -----------------------------\n-// Initialize dashboard\n-// -----------------------------\n-function initDashboard() {\n-  fetchDashboardCards();\n+  const ctx = accessChartEl.getContext(\"2d\");\n \n-  // Load default section (Dashboard Overview)\n-  const firstSection = sidebarBtns[0].dataset.target;\n-  loadSection(firstSection);\n-  sidebarBtns[0].classList.add(\"bg-blue-600\");\n+  new Chart(ctx, {\n+    type: \"line\",\n+    data: {\n+      labels: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n+      datasets: [{\n+        label: \"Access Attempts\",\n+        data: [5, 7, 4, 6, 3, 8, 5],\n+        borderColor: \"rgba(37, 99, 235, 1)\",\n+        backgroundColor: \"rgba(37, 99, 235, 0.2)\",\n+        tension: 0.3,\n+        fill: true,\n+      }]\n+    },\n+    options: {\n+      responsive: true,\n+      plugins: {\n+        legend: { display: true, position: \"top\" },\n+        tooltip: { enabled: true }\n+      },\n+      scales: {\n+        y: { beginAtZero: true, stepSize: 1 },\n+        x: { beginAtZero: true }\n+      }\n+    }\n+  });\n }\n \n-document.addEventListener(\"DOMContentLoaded\", initDashboard);\n+// -----------------------------\n+// Initialize\n+// -----------------------------\n+document.addEventListener(\"DOMContentLoaded\", () => {\n+  fetchResidentOverview();\n+  renderAccessChart();\n+});\n"
                },
                {
                    "date": 1763980778243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,82 +1,86 @@\n // -----------------------------\n // DOM Elements\n // -----------------------------\n-const currentPaymentStatus = document.getElementById(\"currentPaymentStatus\");\n-const nextPaymentDueDate = document.getElementById(\"nextPaymentDueDate\");\n-const accessPrivileges = document.getElementById(\"accessPrivileges\");\n+const mainContent = document.getElementById(\"main-content-area\");\n+const dynamicContent = document.getElementById(\"dynamic-section-content\");\n+const sidebarBtns = document.querySelectorAll(\".sidebarBtn\");\n+const logoutBtn = document.getElementById(\"logoutBtn\");\n \n-// Optional chart element\n-const accessChartEl = document.getElementById(\"accessChart\");\n+// Dashboard cards\n+const paymentStatusCard = document.getElementById(\"paymentStatusCard\");\n+const activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\n+const lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\n+const residentAlerts = document.getElementById(\"residentAlerts\");\n \n // -----------------------------\n-// Fetch resident overview data\n+// Sidebar Navigation\n // -----------------------------\n-async function fetchResidentOverview() {\n+sidebarBtns.forEach(btn => {\n+  btn.addEventListener(\"click\", () => {\n+    const target = btn.dataset.target;\n+    loadSection(target);\n+\n+    // Highlight active sidebar button\n+    sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\"));\n+    btn.classList.add(\"bg-blue-600\");\n+  });\n+});\n+\n+// -----------------------------\n+// Load section HTML dynamically\n+// -----------------------------\n+async function loadSection(url) {\n   try {\n-    // Replace this with real API call if available\n-    // const response = await axios.get(\"/api/resident/overview\");\n-    // const data = response.data;\n+    const res = await fetch(url);\n+    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n+    const html = await res.text();\n+    dynamicContent.innerHTML = html; // Only replace dynamic section\n+  } catch (error) {\n+    console.error(`Error: Failed to load ${url}`, error);\n+    dynamicContent.innerHTML = `<p class=\"text-red-500 text-center\">Failed to load content.</p>`;\n+  }\n+}\n \n-    // Mock data for demonstration\n+// -----------------------------\n+// Fetch & update dashboard cards\n+// -----------------------------\n+async function fetchDashboardCards() {\n+  try {\n+    // Replace with real API call\n     const data = {\n-      currentPaymentStatus: \"Paid\",\n-      nextPaymentDueDate: \"2025-12-10\",\n-      accessPrivileges: \"100%\"\n+      paymentStatus: \"Paid\",\n+      activeVisitorPasses: 3,\n+      lastAccessAttempts: 5,\n+      residentAlerts: 2\n     };\n \n-    // Update the DOM\n-    currentPaymentStatus.textContent = data.currentPaymentStatus;\n-    nextPaymentDueDate.textContent = data.nextPaymentDueDate;\n-    accessPrivileges.textContent = data.accessPrivileges;\n-\n+    paymentStatusCard.textContent = data.paymentStatus;\n+    activeVisitorPasses.textContent = data.activeVisitorPasses;\n+    lastAccessAttempts.textContent = data.lastAccessAttempts;\n+    residentAlerts.textContent = data.residentAlerts;\n   } catch (error) {\n-    console.error(\"Error fetching resident overview data:\", error);\n-\n-    currentPaymentStatus.textContent = \"Error\";\n-    nextPaymentDueDate.textContent = \"Error\";\n-    accessPrivileges.textContent = \"Error\";\n+    console.error(\"Error fetching dashboard cards:\", error);\n   }\n }\n \n // -----------------------------\n-// Optional: Render access chart\n+// Logout handler\n // -----------------------------\n-function renderAccessChart() {\n-  if (!accessChartEl) return;\n+logoutBtn.addEventListener(\"click\", () => {\n+  localStorage.removeItem(\"residentToken\");\n+  window.location.href = \"/login.html\";\n+});\n \n-  const ctx = accessChartEl.getContext(\"2d\");\n+// -----------------------------\n+// Initialize dashboard\n+// -----------------------------\n+function initDashboard() {\n+  fetchDashboardCards();\n \n-  new Chart(ctx, {\n-    type: \"line\",\n-    data: {\n-      labels: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n-      datasets: [{\n-        label: \"Access Attempts\",\n-        data: [5, 7, 4, 6, 3, 8, 5],\n-        borderColor: \"rgba(37, 99, 235, 1)\",\n-        backgroundColor: \"rgba(37, 99, 235, 0.2)\",\n-        tension: 0.3,\n-        fill: true,\n-      }]\n-    },\n-    options: {\n-      responsive: true,\n-      plugins: {\n-        legend: { display: true, position: \"top\" },\n-        tooltip: { enabled: true }\n-      },\n-      scales: {\n-        y: { beginAtZero: true, stepSize: 1 },\n-        x: { beginAtZero: true }\n-      }\n-    }\n-  });\n+  // Load default section (Dashboard Overview)\n+  const firstSection = sidebarBtns[0].dataset.target;\n+  loadSection(firstSection);\n+  sidebarBtns[0].classList.add(\"bg-blue-600\");\n }\n \n-// -----------------------------\n-// Initialize\n-// -----------------------------\n-document.addEventListener(\"DOMContentLoaded\", () => {\n-  fetchResidentOverview();\n-  renderAccessChart();\n-});\n+document.addEventListener(\"DOMContentLoaded\", initDashboard);\n"
                }
            ],
            "date": 1763977206102,
            "name": "Commit-0",
            "content": "// residentsdashboard.js\n// --------------------\n// Handles dynamic content loading, sidebar navigation, and card updates\n\nconst mainContent = document.getElementById(\"dynamic-section-content\");\nconst sidebarBtns = document.querySelectorAll(\".sidebarBtn\");\n\n// Dashboard cards\nconst paymentStatusCard = document.getElementById(\"paymentStatusCard\");\nconst activeVisitorPasses = document.getElementById(\"activeVisitorPasses\");\nconst lastAccessAttempts = document.getElementById(\"lastAccessAttempts\");\nconst residentAlerts = document.getElementById(\"residentAlerts\");\n\n// Load default dashboard overview on page load\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  loadSection(\"sections/resident-overview.html\");\n  fetchDashboardCards();\n});\n\n// Sidebar button click event\nsidebarBtns.forEach(btn => {\n  btn.addEventListener(\"click\", () => {\n    const target = btn.getAttribute(\"data-target\");\n    loadSection(target);\n\n    // Highlight active button\n    sidebarBtns.forEach(b => b.classList.remove(\"bg-blue-600\", \"shadow-inner\"));\n    btn.classList.add(\"bg-blue-600\", \"shadow-inner\");\n  });\n});\n\n// Function to load section HTML dynamically\nasync function loadSection(url) {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error(`Failed to load ${url}`);\n    const html = await response.text();\n    mainContent.innerHTML = html;\n  } catch (error) {\n    mainContent.innerHTML = `<p class=\"text-red-600 text-center font-semibold\">Error loading section: ${error.message}</p>`;\n    console.error(error);\n  }\n}\n\n// Function to fetch and update dashboard cards\nasync function fetchDashboardCards() {\n  try {\n    // Replace these endpoints with your actual API\n    const [paymentRes, visitorRes, accessRes, alertsRes] = await Promise.all([\n      axios.get(\"/api/resident/payment-status\"),\n      axios.get(\"/api/resident/active-visitor-passes\"),\n      axios.get(\"/api/resident/last-access-attempts\"),\n      axios.get(\"/api/resident/notifications\")\n    ]);\n\n    paymentStatusCard.textContent = paymentRes.data.status || \"N/A\";\n    activeVisitorPasses.textContent = visitorRes.data.count || 0;\n    lastAccessAttempts.textContent = accessRes.data.count || 0;\n    residentAlerts.textContent = alertsRes.data.count || 0;\n  } catch (error) {\n    console.error(\"Error fetching dashboard cards:\", error);\n  }\n}\n\n// Logout button\ndocument.getElementById(\"logoutBtn\").addEventListener(\"click\", () => {\n  localStorage.removeItem(\"residentToken\"); // Assuming token is stored here\n  window.location.href = \"/login.html\";\n});\n"
        }
    ]
}