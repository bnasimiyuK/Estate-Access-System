{
    "sourceFile": "frontend/sections/payments.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1763589885333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763620724048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,40 +8,8 @@\n <section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n \n <main class=\"flex-1 overflow-auto p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs w-full\">\n \n-  <!-- MAKE PAYMENT -->\n-  <section class=\"bg-white rounded-xl shadow p-2 col-span-1 flex flex-col\">\n-    <h2 class=\"text-indigo-700 font-bold mb-1 text-sm\">ðŸ’³ Make Payment</h2>\n-    <form id=\"makePaymentForm\" class=\"space-y-1 flex-1 flex flex-col justify-between\">\n-        <div id=\"residentDiv\">\n-            <label for=\"residentId\" class=\"block mb-1\">Resident ID</label>\n-            <select id=\"residentId\" required class=\"w-full border rounded px-1 py-1 text-xs\">\n-                <option value=\"\">Select Resident ID</option>\n-            </select>\n-        </div>\n-        <div>\n-            <label for=\"amount\" class=\"block mb-1\">Amount (KSh)</label>\n-            <input id=\"amount\" type=\"number\" step=\"0.01\" required class=\"w-full border rounded px-1 py-1 text-xs\"/>\n-        </div>\n-        <div>\n-            <label for=\"paymentMethod\" class=\"block mb-1\">Payment Method</label>\n-            <select id=\"paymentMethod\" required class=\"w-full border rounded px-1 py-1 text-xs\">\n-                <option value=\"\">Select</option>\n-                <option value=\"Mpesa\">Mpesa</option>\n-                <option value=\"Bank Transfer\">Bank Transfer</option>\n-                <option value=\"Cash\">Cash</option>\n-            </select>\n-        </div>\n-        <div>\n-            <label for=\"reference\" class=\"block mb-1\">Reference</label>\n-            <input id=\"reference\" type=\"text\" placeholder=\"e.g. MPESA1234\" required class=\"w-full border rounded px-1 py-1 text-xs\"/>\n-        </div>\n-        <button type=\"submit\" class=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-1 rounded text-xs mt-1\">Submit Payment</button>\n-    </form>\n-    <div id=\"msg\" class=\"text-gray-700 mt-1 text-xs\"></div>\n-  </section>\n-\n   <!-- PAYMENT HISTORY -->\n   <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n     <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n     <div class=\"flex justify-between mb-1 text-xs\">\n"
                },
                {
                    "date": 1763620777364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,19 @@\n <!-- DASHBOARD SUMMARY -->\n <section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n \n <main class=\"flex-1 overflow-auto p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs w-full\">\n+<!-- MPESA PAYMENT -->\n+  <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n+    <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n+    <div class=\"flex flex-col space-y-2 max-w-sm\">\n+        <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n+        <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n+        <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n+        <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n+        <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n+    </div>\n+  </section>\n \n   <!-- PAYMENT HISTORY -->\n   <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n     <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n@@ -87,22 +98,8 @@\n             <tbody id=\"balanceBody\" class=\"divide-y divide-gray-200\"></tbody>\n         </table>\n     </div>\n   </section>\n-\n-  <!-- MPESA PAYMENT -->\n-  <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n-    <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n-    <div class=\"flex flex-col space-y-2 max-w-sm\">\n-        <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n-        <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n-        <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n-        <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n-        <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n-    </div>\n-  </section>\n-\n </main>\n-\n <script src=\"js/payment.js\"></script>\n <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n <script src=\"https://cdn.tailwindcss.com\"></script>\n"
                },
                {
                    "date": 1763620963925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,105 +1,111 @@\n+<!-- REQUIRED SCRIPTS -->\n+<script src=\"https://cdn.tailwindcss.com\"></script>\n+<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n+\n <!-- HEADER -->\n <div id=\"header\" class=\"bg-indigo-800 text-white p-2 flex justify-between items-center text-sm\">\n-      <h1 class=\"text-lg font-semibold\">Athi Estate Payments Dashboard</h1>\n-      <button id=\"logoutBtn\" class=\"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-xs\">Logout</button>\n+    <h1 class=\"text-lg font-semibold\">Athi Estate Payments Dashboard</h1>\n+    <button id=\"logoutBtn\" class=\"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-xs\">Logout</button>\n </div>\n \n <!-- DASHBOARD SUMMARY -->\n <section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n \n <main class=\"flex-1 overflow-auto p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs w-full\">\n-<!-- MPESA PAYMENT -->\n-  <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n-    <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n-    <div class=\"flex flex-col space-y-2 max-w-sm\">\n-        <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n-        <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n-        <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n-        <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n-        <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n-    </div>\n-  </section>\n \n-  <!-- PAYMENT HISTORY -->\n-  <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n-    <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n-    <div class=\"flex justify-between mb-1 text-xs\">\n-        <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n-        <div class=\"space-x-1\">\n-            <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-            <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+    <!-- MPESA PAYMENT -->\n+    <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n+        <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n+        <div class=\"flex flex-col space-y-2 max-w-sm\">\n+            <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n+            <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n+            <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n+            <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n+            <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n         </div>\n-    </div>\n-    <div class=\"overflow-auto max-h-60 border rounded\">\n-        <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n-            <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0\">\n-                <tr>\n-                    <th class=\"px-1 py-0.5 text-left\">PaymentID</th>\n-                    <th class=\"px-1 py-0.5 text-left\">ResidentID</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Amount</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Payment Date</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Status</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Reference</th>\n-                    <th class=\"px-1 py-0.5 text-left\">PaymentMethod</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Action</th>\n-                    <th class=\"px-1 py-0.5 text-left\">NationalID</th>\n-                    <th class=\"px-1 py-0.5 text-left\">serviceName</th>\n-                    <th class=\"px-1 py-0.5 text-left\">phoneNumber</th>\n-                    <th class=\"px-1 py-0.5 text-left\">VerifiedDate</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-200\"></tbody>\n-        </table>\n-    </div>\n-  </section>\n+    </section>\n \n-  <!-- VERIFIED PAYMENTS -->\n-  <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n-    <h3 class=\"text-green-700 font-semibold mb-1 text-sm\">âœ… Verified Payments</h3>\n-    <div class=\"flex justify-between mb-1 text-xs\">\n-        <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n-        <div class=\"space-x-1\">\n-            <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-            <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+    <!-- PAYMENT HISTORY -->\n+    <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n+        <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n+        <div class=\"flex justify-between mb-1 text-xs\">\n+            <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n+            <div class=\"space-x-1\">\n+                <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n+                <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+            </div>\n         </div>\n-    </div>\n-    <div class=\"overflow-auto max-h-40 border rounded\">\n-        <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n-            <thead class=\"bg-green-100 text-green-800 sticky top-0\">\n-                <tr>\n-                    <th class=\"px-1 py-0.5 text-left\">Resident</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Amount</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Reference</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Verified Date</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-200\"></tbody>\n-        </table>\n-    </div>\n-  </section>\n+        <div class=\"overflow-auto max-h-60 border rounded\">\n+            <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n+                <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0\">\n+                    <tr>\n+                        <th class=\"px-1 py-0.5 text-left\">PaymentID</th>\n+                        <th class=\"px-1 py-0.5 text-left\">ResidentID</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Amount</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Payment Date</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Status</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Reference</th>\n+                        <th class=\"px-1 py-0.5 text-left\">PaymentMethod</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Action</th>\n+                        <th class=\"px-1 py-0.5 text-left\">NationalID</th>\n+                        <th class=\"px-1 py-0.5 text-left\">serviceName</th>\n+                        <th class=\"px-1 py-0.5 text-left\">phoneNumber</th>\n+                        <th class=\"px-1 py-0.5 text-left\">VerifiedDate</th>\n+                    </tr>\n+                </thead>\n+                <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-200\"></tbody>\n+            </table>\n+        </div>\n+    </section>\n \n-  <!-- BALANCES -->\n-  <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n-    <h3 class=\"text-yellow-700 font-semibold mb-1 text-sm\">ðŸ’° Balances</h3>\n-    <div class=\"flex justify-end mb-1 text-xs space-x-1\">\n-        <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-        <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n-    </div>\n-    <div class=\"overflow-auto max-h-40 border rounded\">\n-        <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n-            <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n-                <tr>\n-                    <th class=\"px-1 py-0.5 text-left\">Resident</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n-                    <th class=\"px-1 py-0.5 text-left\">Balance</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"balanceBody\" class=\"divide-y divide-gray-200\"></tbody>\n-        </table>\n-    </div>\n-  </section>\n+    <!-- VERIFIED PAYMENTS -->\n+    <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n+        <h3 class=\"text-green-700 font-semibold mb-1 text-sm\">âœ… Verified Payments</h3>\n+        <div class=\"flex justify-between mb-1 text-xs\">\n+            <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n+            <div class=\"space-x-1\">\n+                <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n+                <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+            </div>\n+        </div>\n+        <div class=\"overflow-auto max-h-40 border rounded\">\n+            <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n+                <thead class=\"bg-green-100 text-green-800 sticky top-0\">\n+                    <tr>\n+                        <th class=\"px-1 py-0.5 text-left\">Resident</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Amount</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Reference</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Verified Date</th>\n+                    </tr>\n+                </thead>\n+                <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-200\"></tbody>\n+            </table>\n+        </div>\n+    </section>\n+\n+    <!-- BALANCES -->\n+    <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n+        <h3 class=\"text-yellow-700 font-semibold mb-1 text-sm\">ðŸ’° Balances</h3>\n+        <div class=\"flex justify-end mb-1 text-xs space-x-1\">\n+            <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n+            <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+        </div>\n+        <div class=\"overflow-auto max-h-40 border rounded\">\n+            <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n+                <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n+                    <tr>\n+                        <th class=\"px-1 py-0.5 text-left\">Resident</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Balance</th>\n+                    </tr>\n+                </thead>\n+                <tbody id=\"balanceBody\" class=\"divide-y divide-gray-200\"></tbody>\n+            </table>\n+        </div>\n+    </section>\n+\n </main>\n+\n+<!-- SCRIPT -->\n <script src=\"js/payment.js\"></script>\n-<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n-<script src=\"https://cdn.tailwindcss.com\"></script>\n"
                },
                {
                    "date": 1763621094056,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,8 @@\n <!-- REQUIRED SCRIPTS -->\n <script src=\"https://cdn.tailwindcss.com\"></script>\n <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n \n-<!-- HEADER -->\n-<div id=\"header\" class=\"bg-indigo-800 text-white p-2 flex justify-between items-center text-sm\">\n-    <h1 class=\"text-lg font-semibold\">Athi Estate Payments Dashboard</h1>\n-    <button id=\"logoutBtn\" class=\"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-xs\">Logout</button>\n-</div>\n \n <!-- DASHBOARD SUMMARY -->\n <section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n \n"
                },
                {
                    "date": 1763622403596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n         <div class=\"overflow-auto max-h-40 border rounded\">\n             <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n                 <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n                     <tr>\n-                        <th class=\"px-1 py-0.5 text-left\">Resident</th>\n+                        <th class=\"px-1 py-0.5 text-left\">ResidentName</th>\n                         <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n                         <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n                         <th class=\"px-1 py-0.5 text-left\">Balance</th>\n                     </tr>\n"
                },
                {
                    "date": 1763622467424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n         <div class=\"overflow-auto max-h-40 border rounded\">\n             <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n                 <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n                     <tr>\n-                        <th class=\"px-1 py-0.5 text-left\">ResidentName</th>\n+                        <th class=\"px-1 py-0.5 text-left\">Resident Name</th>\n                         <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n                         <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n                         <th class=\"px-1 py-0.5 text-left\">Balance</th>\n                     </tr>\n"
                },
                {
                    "date": 1763627919987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,106 +1,125 @@\n-<!-- REQUIRED SCRIPTS -->\n-<script src=\"https://cdn.tailwindcss.com\"></script>\n-<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n+<!DOCTYPE html>\n \n+<header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n+    <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n+        <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n+        <div id=\"userInfo\" class=\"text-xs text-gray-500\">Loading User...</div>\n+    </div>\n+</header>\n \n <!-- DASHBOARD SUMMARY -->\n-<section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n+<section id=\"dashboardSummary\" class=\"p-4 pt-2 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs w-full\"></section>\n \n-<main class=\"flex-1 overflow-auto p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs w-full\">\n+<main class=\"flex-1 overflow-y-auto p-4 max-w-7xl mx-auto w-full space-y-4\">\n \n-    <!-- MPESA PAYMENT -->\n-    <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n-        <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n-        <div class=\"flex flex-col space-y-2 max-w-sm\">\n-            <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n-            <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n-            <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n-            <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n-            <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n+    <!-- MPESA PAYMENT SIMULATION / FORM -->\n+    <section class=\"bg-white p-6 rounded-xl shadow-lg border border-indigo-100\">\n+        <h2 class=\"text-indigo-700 font-bold mb-4 text-lg\">ðŸ’³ Initiate MPESA Payment</h2>\n+        <div class=\"flex flex-col space-y-3 max-w-sm\">\n+            <input type=\"text\" id=\"residentIdInput\" placeholder=\"Resident ID (e.g., RES001)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+            <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+            <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+            <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+            <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-[1.01]\">\n+                <span id=\"payBtnText\">Simulate Payment</span>\n+            </button>\n+            <div id=\"paymentResult\" class=\"text-xs mt-2 p-2 rounded-lg text-center hidden\"></div>\n         </div>\n     </section>\n \n     <!-- PAYMENT HISTORY -->\n-    <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n-        <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n-        <div class=\"flex justify-between mb-1 text-xs\">\n-            <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n-            <div class=\"space-x-1\">\n-                <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-                <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-indigo-100\">\n+        <h3 class=\"text-indigo-700 font-semibold mb-3 text-lg\">ðŸ“‹ Full Payment History</h3>\n+        <div class=\"flex justify-between items-center mb-3 text-sm\">\n+            <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" class=\"border rounded-lg px-3 py-1.5 focus:ring-indigo-500 focus:border-indigo-500 transition w-1/3\"/>\n+            <div class=\"space-x-2\">\n+                <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+                <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n             </div>\n         </div>\n-        <div class=\"overflow-auto max-h-60 border rounded\">\n+\n+        <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n             <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0\">\n+                <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n                     <tr>\n-                        <th class=\"px-1 py-0.5 text-left\">PaymentID</th>\n-                        <th class=\"px-1 py-0.5 text-left\">ResidentID</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Amount</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Payment Date</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Status</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Reference</th>\n-                        <th class=\"px-1 py-0.5 text-left\">PaymentMethod</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Action</th>\n-                        <th class=\"px-1 py-0.5 text-left\">NationalID</th>\n-                        <th class=\"px-1 py-0.5 text-left\">serviceName</th>\n-                        <th class=\"px-1 py-0.5 text-left\">phoneNumber</th>\n-                        <th class=\"px-1 py-0.5 text-left\">VerifiedDate</th>\n+                        <th class=\"px-3 py-2 text-left w-16\">ID</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                        <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Date</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Status</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Method</th>\n+                        <th class=\"px-3 py-2 text-left w-16\">Action</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n                     </tr>\n                 </thead>\n-                <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-200\"></tbody>\n+                <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n+                    <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n+                </tbody>\n             </table>\n         </div>\n     </section>\n \n     <!-- VERIFIED PAYMENTS -->\n-    <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n-        <h3 class=\"text-green-700 font-semibold mb-1 text-sm\">âœ… Verified Payments</h3>\n-        <div class=\"flex justify-between mb-1 text-xs\">\n-            <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n-            <div class=\"space-x-1\">\n-                <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-                <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-green-100\">\n+        <h3 class=\"text-green-700 font-semibold mb-3 text-lg\">âœ… Verified Transactions</h3>\n+\n+        <div class=\"flex justify-between items-center mb-3 text-sm\">\n+            <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded-lg px-3 py-1.5 focus:ring-green-500 focus:border-green-500 transition w-1/3\"/>\n+            <div class=\"space-x-2\">\n+                <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+                <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n             </div>\n         </div>\n-        <div class=\"overflow-auto max-h-40 border rounded\">\n+\n+        <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n             <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-green-100 text-green-800 sticky top-0\">\n+                <thead class=\"bg-green-100 text-green-800 sticky top-0 shadow-sm\">\n                     <tr>\n-                        <th class=\"px-1 py-0.5 text-left\">Resident</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Amount</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Reference</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Verified Date</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                        <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                        <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n                     </tr>\n                 </thead>\n-                <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-200\"></tbody>\n+                <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-100\"></tbody>\n             </table>\n         </div>\n     </section>\n \n     <!-- BALANCES -->\n-    <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n-        <h3 class=\"text-yellow-700 font-semibold mb-1 text-sm\">ðŸ’° Balances</h3>\n-        <div class=\"flex justify-end mb-1 text-xs space-x-1\">\n-            <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n-            <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-yellow-100\">\n+        <h3 class=\"text-yellow-700 font-semibold mb-3 text-lg\">ðŸ’° Resident Balances Summary</h3>\n+\n+        <div class=\"flex justify-end mb-3 text-sm space-x-2\">\n+            <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+            <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n         </div>\n-        <div class=\"overflow-auto max-h-40 border rounded\">\n+\n+        <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n             <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n+                <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0 shadow-sm\">\n                     <tr>\n-                        <th class=\"px-1 py-0.5 text-left\">Resident Name</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n-                        <th class=\"px-1 py-0.5 text-left\">Balance</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Total Paid (Verified)</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Total Due (Simulated)</th>\n+                        <th class=\"px-3 py-2 text-left w-20\">Balance</th>\n                     </tr>\n                 </thead>\n-                <tbody id=\"balanceBody\" class=\"divide-y divide-gray-200\"></tbody>\n+                <tbody id=\"balanceBody\" class=\"divide-y divide-gray-100\"></tbody>\n             </table>\n         </div>\n     </section>\n \n </main>\n \n-<!-- SCRIPT -->\n-<script src=\"js/payment.js\"></script>\n+<script src=\"https://cdn.tailwindcss.com\"></script>\n+<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n+\n+<!-- Your JS Module (unchanged) -->\n+<script type=\"module\">\n+  /* your entire JS logic stays here exactly as before */\n+</script>\n"
                },
                {
                    "date": 1763628186013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,125 +1,145 @@\n <!DOCTYPE html>\n \n+ <meta charset=\"UTF-8\" />\n+ <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n+ <title>Athi Estate | Payments</title>\n+ <script src=\"https://cdn.tailwindcss.com\"></script>\n+\n+ <style>\n+    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n+    body {\n+        font-family: 'Inter', sans-serif;\n+    }\n+ </style>\n+\n+ <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n+\n <header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n     <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n         <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n         <div id=\"userInfo\" class=\"text-xs text-gray-500\">Loading User...</div>\n     </div>\n </header>\n \n-<!-- DASHBOARD SUMMARY -->\n <section id=\"dashboardSummary\" class=\"p-4 pt-2 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs w-full\"></section>\n \n <main class=\"flex-1 overflow-y-auto p-4 max-w-7xl mx-auto w-full space-y-4\">\n \n-    <!-- MPESA PAYMENT SIMULATION / FORM -->\n+    <!-- MPESA PAYMENT SIMULATION -->\n     <section class=\"bg-white p-6 rounded-xl shadow-lg border border-indigo-100\">\n-        <h2 class=\"text-indigo-700 font-bold mb-4 text-lg\">ðŸ’³ Initiate MPESA Payment</h2>\n-        <div class=\"flex flex-col space-y-3 max-w-sm\">\n-            <input type=\"text\" id=\"residentIdInput\" placeholder=\"Resident ID (e.g., RES001)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n-            <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n-            <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n-            <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n-            <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-[1.01]\">\n-                <span id=\"payBtnText\">Simulate Payment</span>\n-            </button>\n-            <div id=\"paymentResult\" class=\"text-xs mt-2 p-2 rounded-lg text-center hidden\"></div>\n-        </div>\n+      <h2 class=\"text-indigo-700 font-bold mb-4 text-lg\">ðŸ’³ Initiate MPESA Payment</h2>\n+      <div class=\"flex flex-col space-y-3 max-w-sm\">\n+\n+          <select id=\"residentIdSelect\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\">\n+              <option value=\"\" disabled selected>Select Resident ID (or enter new)</option>\n+          </select>\n+\n+          <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+\n+          <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+\n+          <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+\n+          <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-[1.01]\">\n+              <span id=\"payBtnText\">Simulate Payment</span>\n+          </button>\n+\n+          <div id=\"paymentResult\" class=\"text-xs mt-2 p-2 rounded-lg text-center hidden\"></div>\n+      </div>\n     </section>\n \n     <!-- PAYMENT HISTORY -->\n     <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-indigo-100\">\n-        <h3 class=\"text-indigo-700 font-semibold mb-3 text-lg\">ðŸ“‹ Full Payment History</h3>\n-        <div class=\"flex justify-between items-center mb-3 text-sm\">\n-            <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" class=\"border rounded-lg px-3 py-1.5 focus:ring-indigo-500 focus:border-indigo-500 transition w-1/3\"/>\n-            <div class=\"space-x-2\">\n-                <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-                <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-            </div>\n-        </div>\n+      <h3 class=\"text-indigo-700 font-semibold mb-3 text-lg\">ðŸ“‹ Full Payment History</h3>\n \n-        <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n-            <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n-                    <tr>\n-                        <th class=\"px-3 py-2 text-left w-16\">ID</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                        <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Date</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Status</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Method</th>\n-                        <th class=\"px-3 py-2 text-left w-16\">Action</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n-                    </tr>\n-                </thead>\n-                <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n-                    <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n-                </tbody>\n-            </table>\n-        </div>\n+      <div class=\"flex justify-between items-center mb-3 text-sm\">\n+          <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" class=\"border rounded-lg px-3 py-1.5 focus:ring-indigo-500 focus:border-indigo-500 transition w-1/3\"/>\n+\n+          <div class=\"space-x-2\">\n+              <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+              <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+          </div>\n+      </div>\n+\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n+          <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-16\">ID</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Date</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Status</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Method</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Action</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n+                  <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n+              </tbody>\n+          </table>\n+      </div>\n     </section>\n \n-    <!-- VERIFIED PAYMENTS -->\n+    <!-- VERIFIED -->\n     <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-green-100\">\n-        <h3 class=\"text-green-700 font-semibold mb-3 text-lg\">âœ… Verified Transactions</h3>\n+      <h3 class=\"text-green-700 font-semibold mb-3 text-lg\">âœ… Verified Transactions</h3>\n \n-        <div class=\"flex justify-between items-center mb-3 text-sm\">\n-            <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded-lg px-3 py-1.5 focus:ring-green-500 focus:border-green-500 transition w-1/3\"/>\n-            <div class=\"space-x-2\">\n-                <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-                <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-            </div>\n-        </div>\n+      <div class=\"flex justify-between items-center mb-3 text-sm\">\n+          <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded-lg px-3 py-1.5 focus:ring-green-500 focus:border-green-500 transition w-1/3\"/>\n \n-        <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n-            <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-green-100 text-green-800 sticky top-0 shadow-sm\">\n-                    <tr>\n-                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                        <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n-                        <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n-                    </tr>\n-                </thead>\n-                <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-100\"></tbody>\n-            </table>\n-        </div>\n+          <div class=\"space-x-2\">\n+              <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+              <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+          </div>\n+      </div>\n+\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n+          <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-green-100 text-green-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-100\"></tbody>\n+          </table>\n+      </div>\n     </section>\n \n     <!-- BALANCES -->\n     <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-yellow-100\">\n-        <h3 class=\"text-yellow-700 font-semibold mb-3 text-lg\">ðŸ’° Resident Balances Summary</h3>\n+      <h3 class=\"text-yellow-700 font-semibold mb-3 text-lg\">ðŸ’° Resident Balances Summary</h3>\n \n-        <div class=\"flex justify-end mb-3 text-sm space-x-2\">\n-            <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-            <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-        </div>\n+      <div class=\"flex justify-end mb-3 text-sm space-x-2\">\n+          <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+          <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+      </div>\n \n-        <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n-            <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n-                <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0 shadow-sm\">\n-                    <tr>\n-                        <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Total Paid (Verified)</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Total Due (Simulated)</th>\n-                        <th class=\"px-3 py-2 text-left w-20\">Balance</th>\n-                    </tr>\n-                </thead>\n-                <tbody id=\"balanceBody\" class=\"divide-y divide-gray-100\"></tbody>\n-            </table>\n-        </div>\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n+          <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Total Paid (Verified)</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Total Due (Simulated)</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Balance</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"balanceBody\" class=\"divide-y divide-gray-100\"></tbody>\n+          </table>\n+      </div>\n     </section>\n \n </main>\n \n-<script src=\"https://cdn.tailwindcss.com\"></script>\n-<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n-\n-<!-- Your JS Module (unchanged) -->\n <script type=\"module\">\n-  /* your entire JS logic stays here exactly as before */\n+  <!-- JS BLOCK UNCHANGED -->\n </script>\n"
                },
                {
                    "date": 1763629533510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,7 +139,5 @@\n     </section>\n \n </main>\n \n-<script type=\"module\">\n-  <!-- JS BLOCK UNCHANGED -->\n-</script>\n+<script type=\"module\" src=\"js/payments.js></script>\n"
                },
                {
                    "date": 1763631897413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,143 +1,116 @@\n-<!DOCTYPE html>\n-\n- <meta charset=\"UTF-8\" />\n- <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n- <title>Athi Estate | Payments</title>\n- <script src=\"https://cdn.tailwindcss.com\"></script>\n-\n- <style>\n-    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n-    body {\n-        font-family: 'Inter', sans-serif;\n-    }\n- </style>\n-\n- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n-\n-<header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n-    <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n-        <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n-        <div id=\"userInfo\" class=\"text-xs text-gray-500\">Loading User...</div>\n+<!-- HEADER -->\n+<header>\n+    <div class=\"header-container\">\n+        <h1>Athi Estate Payments</h1>\n+        <div id=\"userInfo\">Loading User...</div>\n     </div>\n </header>\n \n-<section id=\"dashboardSummary\" class=\"p-4 pt-2 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs w-full\"></section>\n+<!-- DASHBOARD SUMMARY -->\n+<section id=\"dashboardSummary\"></section>\n \n-<main class=\"flex-1 overflow-y-auto p-4 max-w-7xl mx-auto w-full space-y-4\">\n+<main>\n \n-    <!-- MPESA PAYMENT SIMULATION -->\n-    <section class=\"bg-white p-6 rounded-xl shadow-lg border border-indigo-100\">\n-      <h2 class=\"text-indigo-700 font-bold mb-4 text-lg\">ðŸ’³ Initiate MPESA Payment</h2>\n-      <div class=\"flex flex-col space-y-3 max-w-sm\">\n+  <!-- MPESA PAYMENT FORM -->\n+  <section>\n+    <h2>ðŸ’³ Initiate MPESA Payment</h2>\n+    <div class=\"form-container\">\n+        <select id=\"residentIdSelect\">\n+            <option value=\"\" disabled selected>Select Resident ID (or enter new)</option>\n+        </select>\n+        <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" />\n+        <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" />\n+        <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" />\n+        <button id=\"payBtn\">\n+            <span id=\"payBtnText\">Simulate Payment</span>\n+        </button>\n+        <div id=\"paymentResult\" class=\"hidden\"></div>\n+    </div>\n+  </section>\n \n-          <select id=\"residentIdSelect\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\">\n-              <option value=\"\" disabled selected>Select Resident ID (or enter new)</option>\n-          </select>\n+  <!-- PAYMENT HISTORY -->\n+  <section>\n+    <h3>ðŸ“‹ Full Payment History</h3>\n+    <div class=\"table-controls\">\n+        <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" />\n+        <div>\n+            <button id=\"exportCsv\">Export CSV</button>\n+            <button id=\"exportExcel\">Export Excel</button>\n+        </div>\n+    </div>\n+    <div class=\"table-wrapper\">\n+        <table id=\"paymentsTable\">\n+            <thead>\n+                <tr>\n+                    <th>ID</th>\n+                    <th>ResidentID</th>\n+                    <th>Amount</th>\n+                    <th>Date</th>\n+                    <th>Status</th>\n+                    <th>Reference</th>\n+                    <th>Method</th>\n+                    <th>Action</th>\n+                    <th>NationalID</th>\n+                    <th>Service Name</th>\n+                    <th>Phone</th>\n+                    <th>Verified Date</th>\n+                </tr>\n+            </thead>\n+            <tbody id=\"paymentsBody\">\n+                <tr><td colspan=\"12\">Loading payments...</td></tr>\n+            </tbody>\n+        </table>\n+    </div>\n+  </section>\n \n-          <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+  <!-- VERIFIED PAYMENTS -->\n+  <section>\n+    <h3>âœ… Verified Transactions</h3>\n+    <div class=\"table-controls\">\n+        <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" />\n+        <div>\n+            <button id=\"exportVerifiedCsv\">Export CSV</button>\n+            <button id=\"exportVerifiedExcel\">Export Excel</button>\n+        </div>\n+    </div>\n+    <div class=\"table-wrapper\">\n+        <table id=\"verifiedTable\">\n+            <thead>\n+                <tr>\n+                    <th>ResidentID</th>\n+                    <th>Amount</th>\n+                    <th>Reference</th>\n+                    <th>Verified Date</th>\n+                </tr>\n+            </thead>\n+            <tbody id=\"verifiedBody\"></tbody>\n+        </table>\n+    </div>\n+  </section>\n \n-          <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+  <!-- BALANCES -->\n+  <section>\n+    <h3>ðŸ’° Resident Balances Summary</h3>\n+    <div class=\"table-controls\">\n+        <div></div>\n+        <div>\n+            <button id=\"exportBalancesCsv\">Export CSV</button>\n+            <button id=\"exportBalancesExcel\">Export Excel</button>\n+        </div>\n+    </div>\n+    <div class=\"table-wrapper\">\n+        <table id=\"balanceTable\">\n+            <thead>\n+                <tr>\n+                    <th>ResidentID</th>\n+                    <th>Total Paid (Verified)</th>\n+                    <th>Total Due (Simulated)</th>\n+                    <th>Balance</th>\n+                </tr>\n+            </thead>\n+            <tbody id=\"balanceBody\"></tbody>\n+        </table>\n+    </div>\n+  </section>\n \n-          <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n-\n-          <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-[1.01]\">\n-              <span id=\"payBtnText\">Simulate Payment</span>\n-          </button>\n-\n-          <div id=\"paymentResult\" class=\"text-xs mt-2 p-2 rounded-lg text-center hidden\"></div>\n-      </div>\n-    </section>\n-\n-    <!-- PAYMENT HISTORY -->\n-    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-indigo-100\">\n-      <h3 class=\"text-indigo-700 font-semibold mb-3 text-lg\">ðŸ“‹ Full Payment History</h3>\n-\n-      <div class=\"flex justify-between items-center mb-3 text-sm\">\n-          <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" class=\"border rounded-lg px-3 py-1.5 focus:ring-indigo-500 focus:border-indigo-500 transition w-1/3\"/>\n-\n-          <div class=\"space-x-2\">\n-              <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-              <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-          </div>\n-      </div>\n-\n-      <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n-          <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n-              <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n-                  <tr>\n-                      <th class=\"px-3 py-2 text-left w-16\">ID</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Date</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Status</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Method</th>\n-                      <th class=\"px-3 py-2 text-left w-16\">Action</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n-                  </tr>\n-              </thead>\n-              <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n-                  <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n-              </tbody>\n-          </table>\n-      </div>\n-    </section>\n-\n-    <!-- VERIFIED -->\n-    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-green-100\">\n-      <h3 class=\"text-green-700 font-semibold mb-3 text-lg\">âœ… Verified Transactions</h3>\n-\n-      <div class=\"flex justify-between items-center mb-3 text-sm\">\n-          <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded-lg px-3 py-1.5 focus:ring-green-500 focus:border-green-500 transition w-1/3\"/>\n-\n-          <div class=\"space-x-2\">\n-              <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-              <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-          </div>\n-      </div>\n-\n-      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n-          <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n-              <thead class=\"bg-green-100 text-green-800 sticky top-0 shadow-sm\">\n-                  <tr>\n-                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n-                  </tr>\n-              </thead>\n-              <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-100\"></tbody>\n-          </table>\n-      </div>\n-    </section>\n-\n-    <!-- BALANCES -->\n-    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-yellow-100\">\n-      <h3 class=\"text-yellow-700 font-semibold mb-3 text-lg\">ðŸ’° Resident Balances Summary</h3>\n-\n-      <div class=\"flex justify-end mb-3 text-sm space-x-2\">\n-          <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n-          <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n-      </div>\n-\n-      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n-          <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n-              <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0 shadow-sm\">\n-                  <tr>\n-                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Total Paid (Verified)</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Total Due (Simulated)</th>\n-                      <th class=\"px-3 py-2 text-left w-20\">Balance</th>\n-                  </tr>\n-              </thead>\n-              <tbody id=\"balanceBody\" class=\"divide-y divide-gray-100\"></tbody>\n-          </table>\n-      </div>\n-    </section>\n-\n-</main>\n-\n-<script type=\"module\" src=\"js/payments.js></script>\n+<script type=\"module\" src=\"js/payment.js\"></script>\n"
                },
                {
                    "date": 1763631939037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,116 +1,143 @@\n-<!-- HEADER -->\n-<header>\n-    <div class=\"header-container\">\n-        <h1>Athi Estate Payments</h1>\n-        <div id=\"userInfo\">Loading User...</div>\n+<!DOCTYPE html>\n+\n+ <meta charset=\"UTF-8\" />\n+ <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n+ <title>Athi Estate | Payments</title>\n+ <script src=\"https://cdn.tailwindcss.com\"></script>\n+\n+ <style>\n+    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');\n+    body {\n+        font-family: 'Inter', sans-serif;\n+    }\n+ </style>\n+\n+ <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n+\n+<header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n+    <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n+        <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n+        <div id=\"userInfo\" class=\"text-xs text-gray-500\">Loading User...</div>\n     </div>\n </header>\n \n-<!-- DASHBOARD SUMMARY -->\n-<section id=\"dashboardSummary\"></section>\n+<section id=\"dashboardSummary\" class=\"p-4 pt-2 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs w-full\"></section>\n \n-<main>\n+<main class=\"flex-1 overflow-y-auto p-4 max-w-7xl mx-auto w-full space-y-4\">\n \n-  <!-- MPESA PAYMENT FORM -->\n-  <section>\n-    <h2>ðŸ’³ Initiate MPESA Payment</h2>\n-    <div class=\"form-container\">\n-        <select id=\"residentIdSelect\">\n-            <option value=\"\" disabled selected>Select Resident ID (or enter new)</option>\n-        </select>\n-        <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" />\n-        <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" />\n-        <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" />\n-        <button id=\"payBtn\">\n-            <span id=\"payBtnText\">Simulate Payment</span>\n-        </button>\n-        <div id=\"paymentResult\" class=\"hidden\"></div>\n-    </div>\n-  </section>\n+    <!-- MPESA PAYMENT SIMULATION -->\n+    <section class=\"bg-white p-6 rounded-xl shadow-lg border border-indigo-100\">\n+      <h2 class=\"text-indigo-700 font-bold mb-4 text-lg\">ðŸ’³ Initiate MPESA Payment</h2>\n+      <div class=\"flex flex-col space-y-3 max-w-sm\">\n \n-  <!-- PAYMENT HISTORY -->\n-  <section>\n-    <h3>ðŸ“‹ Full Payment History</h3>\n-    <div class=\"table-controls\">\n-        <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" />\n-        <div>\n-            <button id=\"exportCsv\">Export CSV</button>\n-            <button id=\"exportExcel\">Export Excel</button>\n-        </div>\n-    </div>\n-    <div class=\"table-wrapper\">\n-        <table id=\"paymentsTable\">\n-            <thead>\n-                <tr>\n-                    <th>ID</th>\n-                    <th>ResidentID</th>\n-                    <th>Amount</th>\n-                    <th>Date</th>\n-                    <th>Status</th>\n-                    <th>Reference</th>\n-                    <th>Method</th>\n-                    <th>Action</th>\n-                    <th>NationalID</th>\n-                    <th>Service Name</th>\n-                    <th>Phone</th>\n-                    <th>Verified Date</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"paymentsBody\">\n-                <tr><td colspan=\"12\">Loading payments...</td></tr>\n-            </tbody>\n-        </table>\n-    </div>\n-  </section>\n+          <select id=\"residentIdSelect\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\">\n+              <option value=\"\" disabled selected>Select Resident ID (or enter new)</option>\n+          </select>\n \n-  <!-- VERIFIED PAYMENTS -->\n-  <section>\n-    <h3>âœ… Verified Transactions</h3>\n-    <div class=\"table-controls\">\n-        <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" />\n-        <div>\n-            <button id=\"exportVerifiedCsv\">Export CSV</button>\n-            <button id=\"exportVerifiedExcel\">Export Excel</button>\n-        </div>\n-    </div>\n-    <div class=\"table-wrapper\">\n-        <table id=\"verifiedTable\">\n-            <thead>\n-                <tr>\n-                    <th>ResidentID</th>\n-                    <th>Amount</th>\n-                    <th>Reference</th>\n-                    <th>Verified Date</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"verifiedBody\"></tbody>\n-        </table>\n-    </div>\n-  </section>\n+          <input type=\"text\" id=\"serviceNameInput\" placeholder=\"Service Name (e.g., Monthly Dues)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n \n-  <!-- BALANCES -->\n-  <section>\n-    <h3>ðŸ’° Resident Balances Summary</h3>\n-    <div class=\"table-controls\">\n-        <div></div>\n-        <div>\n-            <button id=\"exportBalancesCsv\">Export CSV</button>\n-            <button id=\"exportBalancesExcel\">Export Excel</button>\n-        </div>\n-    </div>\n-    <div class=\"table-wrapper\">\n-        <table id=\"balanceTable\">\n-            <thead>\n-                <tr>\n-                    <th>ResidentID</th>\n-                    <th>Total Paid (Verified)</th>\n-                    <th>Total Due (Simulated)</th>\n-                    <th>Balance</th>\n-                </tr>\n-            </thead>\n-            <tbody id=\"balanceBody\"></tbody>\n-        </table>\n-    </div>\n-  </section>\n+          <input type=\"number\" id=\"paymentAmountInput\" placeholder=\"Amount (Ksh)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n \n-<script type=\"module\" src=\"js/payment.js\"></script>\n+          <input type=\"text\" id=\"phoneNumberInput\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition\"/>\n+\n+          <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-[1.01]\">\n+              <span id=\"payBtnText\">Simulate Payment</span>\n+          </button>\n+\n+          <div id=\"paymentResult\" class=\"text-xs mt-2 p-2 rounded-lg text-center hidden\"></div>\n+      </div>\n+    </section>\n+\n+    <!-- PAYMENT HISTORY -->\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-indigo-100\">\n+      <h3 class=\"text-indigo-700 font-semibold mb-3 text-lg\">ðŸ“‹ Full Payment History</h3>\n+\n+      <div class=\"flex justify-between items-center mb-3 text-sm\">\n+          <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID, Status, or Ref\" class=\"border rounded-lg px-3 py-1.5 focus:ring-indigo-500 focus:border-indigo-500 transition w-1/3\"/>\n+\n+          <div class=\"space-x-2\">\n+              <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+              <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+          </div>\n+      </div>\n+\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n+          <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-16\">ID</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Date</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Status</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Method</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Action</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n+                  <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n+              </tbody>\n+          </table>\n+      </div>\n+    </section>\n+\n+    <!-- VERIFIED -->\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-green-100\">\n+      <h3 class=\"text-green-700 font-semibold mb-3 text-lg\">âœ… Verified Transactions</h3>\n+\n+      <div class=\"flex justify-between items-center mb-3 text-sm\">\n+          <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded-lg px-3 py-1.5 focus:ring-green-500 focus:border-green-500 transition w-1/3\"/>\n+\n+          <div class=\"space-x-2\">\n+              <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+              <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+          </div>\n+      </div>\n+\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n+          <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-green-100 text-green-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-100\"></tbody>\n+          </table>\n+      </div>\n+    </section>\n+\n+    <!-- BALANCES -->\n+    <section class=\"bg-white rounded-xl shadow-lg p-4 flex flex-col border border-yellow-100\">\n+      <h3 class=\"text-yellow-700 font-semibold mb-3 text-lg\">ðŸ’° Resident Balances Summary</h3>\n+\n+      <div class=\"flex justify-end mb-3 text-sm space-x-2\">\n+          <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export CSV</button>\n+          <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded-lg text-white text-sm font-medium transition shadow-sm\">Export Excel</button>\n+      </div>\n+\n+      <div class=\"overflow-x-auto overflow-y-auto max-h-[250px] border border-gray-200 rounded-lg\">\n+          <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n+              <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0 shadow-sm\">\n+                  <tr>\n+                      <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Total Paid (Verified)</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Total Due (Simulated)</th>\n+                      <th class=\"px-3 py-2 text-left w-20\">Balance</th>\n+                  </tr>\n+              </thead>\n+              <tbody id=\"balanceBody\" class=\"divide-y divide-gray-100\"></tbody>\n+          </table>\n+      </div>\n+    </section>\n+\n+</main>\n+\n+<script type=\"module\" src=\"js/payments.js></script>\n"
                },
                {
                    "date": 1763635475125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,20 +64,20 @@\n       <div class=\"overflow-x-auto overflow-y-auto max-h-[300px] border border-gray-200 rounded-lg\">\n           <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n               <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0 shadow-sm\">\n                   <tr>\n-                      <th class=\"px-3 py-2 text-left w-16\">ID</th>\n+                      <th class=\"px-3 py-2 text-left w-16\">PaymentID</th>\n                       <th class=\"px-3 py-2 text-left w-20\">ResidentID</th>\n                       <th class=\"px-3 py-2 text-left w-16\">Amount</th>\n                       <th class=\"px-3 py-2 text-left w-24\">Date</th>\n                       <th class=\"px-3 py-2 text-left w-20\">Status</th>\n                       <th class=\"px-3 py-2 text-left w-20\">Reference</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Method</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">PaymentMethod</th>\n                       <th class=\"px-3 py-2 text-left w-16\">Action</th>\n                       <th class=\"px-3 py-2 text-left w-20\">NationalID</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Service Name</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Phone</th>\n-                      <th class=\"px-3 py-2 text-left w-24\">Verified Date</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">ServiceName</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">PhoneNumber</th>\n+                      <th class=\"px-3 py-2 text-left w-24\">VerifiedDate</th>\n                   </tr>\n               </thead>\n               <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n                   <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n"
                },
                {
                    "date": 1763635520637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,10 +16,9 @@\n \n <header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n     <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n         <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n-        <div id=\"userInfo\" class=\"text-xs text-gray-500\">Loading User...</div>\n-    </div>\n+        </div>\n </header>\n \n <section id=\"dashboardSummary\" class=\"p-4 pt-2 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-4 text-xs w-full\"></section>\n \n"
                },
                {
                    "date": 1763635576430,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n \n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n \n <header class=\"bg-white shadow-md p-4 sticky top-0 z-10\">\n-    <div class=\"max-w-7xl mx-auto flex justify-between items-center\">\n+    <div class=\"max-w-7xl mx-auto flex justify-center items-center\">\n         <h1 class=\"text-xl font-bold text-indigo-700\">Athi Estate Payments</h1>\n         </div>\n </header>\n \n"
                },
                {
                    "date": 1763635632960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,12 +77,9 @@\n                       <th class=\"px-3 py-2 text-left w-24\">PhoneNumber</th>\n                       <th class=\"px-3 py-2 text-left w-24\">VerifiedDate</th>\n                   </tr>\n               </thead>\n-              <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-100\">\n-                  <tr><td colspan=\"12\" class=\"text-center py-4 text-gray-500\">Loading payments...</td></tr>\n-              </tbody>\n-          </table>\n+                      </table>\n       </div>\n     </section>\n \n     <!-- VERIFIED -->\n"
                }
            ],
            "date": 1763589885333,
            "name": "Commit-0",
            "content": "<!-- HEADER -->\n<div id=\"header\" class=\"bg-indigo-800 text-white p-2 flex justify-between items-center text-sm\">\n      <h1 class=\"text-lg font-semibold\">Athi Estate Payments Dashboard</h1>\n      <button id=\"logoutBtn\" class=\"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-xs\">Logout</button>\n</div>\n\n<!-- DASHBOARD SUMMARY -->\n<section id=\"dashboardSummary\" class=\"p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs mb-2 w-full\"></section>\n\n<main class=\"flex-1 overflow-auto p-2 max-w-7xl mx-auto grid grid-cols-3 gap-2 text-xs w-full\">\n\n  <!-- MAKE PAYMENT -->\n  <section class=\"bg-white rounded-xl shadow p-2 col-span-1 flex flex-col\">\n    <h2 class=\"text-indigo-700 font-bold mb-1 text-sm\">ðŸ’³ Make Payment</h2>\n    <form id=\"makePaymentForm\" class=\"space-y-1 flex-1 flex flex-col justify-between\">\n        <div id=\"residentDiv\">\n            <label for=\"residentId\" class=\"block mb-1\">Resident ID</label>\n            <select id=\"residentId\" required class=\"w-full border rounded px-1 py-1 text-xs\">\n                <option value=\"\">Select Resident ID</option>\n            </select>\n        </div>\n        <div>\n            <label for=\"amount\" class=\"block mb-1\">Amount (KSh)</label>\n            <input id=\"amount\" type=\"number\" step=\"0.01\" required class=\"w-full border rounded px-1 py-1 text-xs\"/>\n        </div>\n        <div>\n            <label for=\"paymentMethod\" class=\"block mb-1\">Payment Method</label>\n            <select id=\"paymentMethod\" required class=\"w-full border rounded px-1 py-1 text-xs\">\n                <option value=\"\">Select</option>\n                <option value=\"Mpesa\">Mpesa</option>\n                <option value=\"Bank Transfer\">Bank Transfer</option>\n                <option value=\"Cash\">Cash</option>\n            </select>\n        </div>\n        <div>\n            <label for=\"reference\" class=\"block mb-1\">Reference</label>\n            <input id=\"reference\" type=\"text\" placeholder=\"e.g. MPESA1234\" required class=\"w-full border rounded px-1 py-1 text-xs\"/>\n        </div>\n        <button type=\"submit\" class=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-1 rounded text-xs mt-1\">Submit Payment</button>\n    </form>\n    <div id=\"msg\" class=\"text-gray-700 mt-1 text-xs\"></div>\n  </section>\n\n  <!-- PAYMENT HISTORY -->\n  <section class=\"bg-white rounded-xl shadow p-2 col-span-2 flex flex-col\">\n    <h3 class=\"text-indigo-700 font-semibold mb-1 text-sm\">ðŸ“‹ Payment History</h3>\n    <div class=\"flex justify-between mb-1 text-xs\">\n        <input type=\"text\" id=\"filterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n        <div class=\"space-x-1\">\n            <button id=\"exportCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n            <button id=\"exportExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n        </div>\n    </div>\n    <div class=\"overflow-auto max-h-60 border rounded\">\n        <table id=\"paymentsTable\" class=\"min-w-full text-xs\">\n            <thead class=\"bg-indigo-100 text-indigo-800 sticky top-0\">\n                <tr>\n                    <th class=\"px-1 py-0.5 text-left\">PaymentID</th>\n                    <th class=\"px-1 py-0.5 text-left\">ResidentID</th>\n                    <th class=\"px-1 py-0.5 text-left\">Amount</th>\n                    <th class=\"px-1 py-0.5 text-left\">Payment Date</th>\n                    <th class=\"px-1 py-0.5 text-left\">Status</th>\n                    <th class=\"px-1 py-0.5 text-left\">Reference</th>\n                    <th class=\"px-1 py-0.5 text-left\">PaymentMethod</th>\n                    <th class=\"px-1 py-0.5 text-left\">Action</th>\n                    <th class=\"px-1 py-0.5 text-left\">NationalID</th>\n                    <th class=\"px-1 py-0.5 text-left\">serviceName</th>\n                    <th class=\"px-1 py-0.5 text-left\">phoneNumber</th>\n                    <th class=\"px-1 py-0.5 text-left\">VerifiedDate</th>\n                </tr>\n            </thead>\n            <tbody id=\"paymentsBody\" class=\"divide-y divide-gray-200\"></tbody>\n        </table>\n    </div>\n  </section>\n\n  <!-- VERIFIED PAYMENTS -->\n  <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n    <h3 class=\"text-green-700 font-semibold mb-1 text-sm\">âœ… Verified Payments</h3>\n    <div class=\"flex justify-between mb-1 text-xs\">\n        <input type=\"text\" id=\"verifiedFilterInput\" placeholder=\"Filter by Resident ID\" class=\"border rounded px-1 py-1\"/>\n        <div class=\"space-x-1\">\n            <button id=\"exportVerifiedCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n            <button id=\"exportVerifiedExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n        </div>\n    </div>\n    <div class=\"overflow-auto max-h-40 border rounded\">\n        <table id=\"verifiedTable\" class=\"min-w-full text-xs\">\n            <thead class=\"bg-green-100 text-green-800 sticky top-0\">\n                <tr>\n                    <th class=\"px-1 py-0.5 text-left\">Resident</th>\n                    <th class=\"px-1 py-0.5 text-left\">Amount</th>\n                    <th class=\"px-1 py-0.5 text-left\">Reference</th>\n                    <th class=\"px-1 py-0.5 text-left\">Verified Date</th>\n                </tr>\n            </thead>\n            <tbody id=\"verifiedBody\" class=\"divide-y divide-gray-200\"></tbody>\n        </table>\n    </div>\n  </section>\n\n  <!-- BALANCES -->\n  <section class=\"bg-white rounded-xl shadow p-2 col-span-3 flex flex-col\">\n    <h3 class=\"text-yellow-700 font-semibold mb-1 text-sm\">ðŸ’° Balances</h3>\n    <div class=\"flex justify-end mb-1 text-xs space-x-1\">\n        <button id=\"exportBalancesCsv\" class=\"bg-green-500 hover:bg-green-600 px-2 py-0.5 rounded text-white\">CSV</button>\n        <button id=\"exportBalancesExcel\" class=\"bg-blue-500 hover:bg-blue-600 px-2 py-0.5 rounded text-white\">Excel</button>\n    </div>\n    <div class=\"overflow-auto max-h-40 border rounded\">\n        <table id=\"balanceTable\" class=\"min-w-full text-xs\">\n            <thead class=\"bg-yellow-100 text-yellow-800 sticky top-0\">\n                <tr>\n                    <th class=\"px-1 py-0.5 text-left\">Resident</th>\n                    <th class=\"px-1 py-0.5 text-left\">Total Paid</th>\n                    <th class=\"px-1 py-0.5 text-left\">Total Due</th>\n                    <th class=\"px-1 py-0.5 text-left\">Balance</th>\n                </tr>\n            </thead>\n            <tbody id=\"balanceBody\" class=\"divide-y divide-gray-200\"></tbody>\n        </table>\n    </div>\n  </section>\n\n  <!-- MPESA PAYMENT -->\n  <section class=\"bg-white p-4 rounded-xl shadow col-span-3\">\n    <h2 class=\"text-indigo-700 font-bold mb-2 text-sm\">ðŸ’³ MPESA Payment</h2>\n    <div class=\"flex flex-col space-y-2 max-w-sm\">\n        <input type=\"text\" id=\"serviceName\" placeholder=\"Service Name (e.g Estate Registration)\" class=\"border p-2 rounded\"/>\n        <input type=\"number\" id=\"paymentAmount\" placeholder=\"Amount\" class=\"border p-2 rounded\"/>\n        <input type=\"text\" id=\"phoneNumber\" placeholder=\"Phone (2547XXXXXXXX)\" class=\"border p-2 rounded\"/>\n        <button id=\"payBtn\" class=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded\">Pay Now</button>\n        <div id=\"paymentResult\" class=\"text-xs mt-1\"></div>\n    </div>\n  </section>\n\n</main>\n\n<script src=\"js/payment.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js\"></script>\n<script src=\"https://cdn.tailwindcss.com\"></script>\n"
        }
    ]
}