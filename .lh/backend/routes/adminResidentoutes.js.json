{
    "sourceFile": "backend/routes/adminResidentoutes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763786046202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763786046202,
            "name": "Commit-0",
            "content": "import express from \"express\";\r\nimport sql from \"mssql\";\r\nimport { verifyToken, isAdmin } from \"../middleware/authMiddleware.js\";\r\nimport { dbPool } from \"../server.js\";\r\n\r\nconst router = express.Router();\r\n\r\n/**\r\n * @route GET /api/admin/residents/approved\r\n * @desc Fetch all approved residents\r\n * @access Admin only\r\n */\r\nrouter.get(\"/approved\", verifyToken, isAdmin, async (req, res) => {\r\n    try {\r\n        const pool = await dbPool;\r\n        const result = await pool.request().query(`\r\n            SELECT ResidentID, ResidentName, NationalID, PhoneNumber, Email, HouseNumber, CourtName \r\n            FROM Residents\r\n            WHERE Status = 'Approved'\r\n        `);\r\n\r\n        res.status(200).json(result.recordset);\r\n    } catch (error) {\r\n        console.error(\"Error fetching approved residents:\", error);\r\n        res.status(500).json({ message: \"Server error\" });\r\n    }\r\n});\r\n\r\nexport default router;\r\n"
        }
    ]
}