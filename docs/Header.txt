<!-- ðŸ§­ HEADER -->
<header class="fixed top-0 left-0 right-0 z-30 flex justify-between items-center px-8 py-3 bg-black/30 backdrop-blur-md border-b border-white/20 text-white">
  <a href="home.html" class="flex items-center space-x-2">
    <div class="w-10 h-10 bg-white/20 rounded-full overflow-hidden border border-white/30">
      <img src="assets/Logo.png" alt="Logo" class="object-cover w-full h-full" />
    </div>
    <span class="text-lg font-bold">Athi Highway Estate</span>
  </a>

  <nav class="flex items-center space-x-6 text-sm">
    <ul class="flex space-x-4">
      <li><a href="about-us.html" class="hover:text-blue-300">About</a></li>
      <li><a href="contact.html" class="hover:text-blue-300">Contact</a></li>
      <li><a href="membership.html" class="hover:text-blue-300">Membership</a></li>
      <li id="loginLink"><a href="login.html" class="hover:text-blue-300">Login</a></li>
    </ul>

    <!-- ðŸ‘¤ Profile Dropdown -->
    <div id="profileMenu" class="relative hidden">
      <button id="profileBtn" class="flex items-center space-x-2 focus:outline-none">
        <img src="assets/profile.png" alt="Profile" class="w-8 h-8 rounded-full border border-white/40" />
        <span id="usernameDisplay" class="hidden md:inline text-sm font-medium">Profile</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <!-- Dropdown Menu -->
      <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-44 bg-white text-gray-800 rounded-lg shadow-lg py-2">
        <a href="profile.html" class="block px-4 py-2 hover:bg-gray-100">My Profile</a>
        <a href="adminportal.html" id="adminLink" class="hidden block px-4 py-2 text-blue-600 hover:bg-gray-100">Admin Portal</a>
        <button id="logoutBtn" class="w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100">Logout</button>
      </div>
    </div>
  </nav>
</header>

<!-- ðŸŒ Profile Dropdown Script -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const token = localStorage.getItem("token");
  const role = localStorage.getItem("userRole");
  const username = localStorage.getItem("username");

  const profileMenu = document.getElementById("profileMenu");
  const loginLink = document.getElementById("loginLink");
  const adminLink = document.getElementById("adminLink");

  // ðŸŸ¢ Show/hide profile and login
  if (token) {
    profileMenu.classList.remove("hidden");
    loginLink.classList.add("hidden");

    if (username) {
      document.getElementById("usernameDisplay").textContent = username;
    }

    // ðŸ‘‘ Show admin link if userRole is "Admin"
    if (role && role.toLowerCase() === "admin") {
      adminLink.classList.remove("hidden");
    }
  }

  // ðŸ”½ Dropdown toggle
  const profileBtn = document.getElementById("profileBtn");
  const dropdown = document.getElementById("profileDropdown");
  profileBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdown.classList.toggle("hidden");
  });

  // âŒ Close dropdown when clicking outside
  document.addEventListener("click", () => dropdown.classList.add("hidden"));

  // ðŸšª Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("token");
    localStorage.removeItem("userRole");
    localStorage.removeItem("username");
    localStorage.removeItem("residentStatus");
    window.location.href = "login.html";
  });
});
</script>
