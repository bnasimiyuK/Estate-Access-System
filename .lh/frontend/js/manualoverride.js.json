{
    "sourceFile": "frontend/js/manualoverride.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1763948511948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763948919925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,10 +5,10 @@\n  * fragment (which contains its own styles and script reference)\r\n  * and insert it into a target container on a main page.\r\n  */\r\n \r\n-// NOTE: This assumes 'gate_override_logs.html' is in the same directory.\r\n-const FRAGMENT_PATH = './gate_override_logs.html';\r\n+// NOTE: This assumes 'manualoverride.html' is in the same directory.\r\n+const FRAGMENT_PATH = './manualoverride.html';\r\n const TARGET_ELEMENT_ID = 'main-content-area'; // The ID of the div where you want to load the logs\r\n \r\n /**\r\n  * Fetches the HTML fragment content and injects it into the target container.\r\n"
                },
                {
                    "date": 1763949261746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,61 +1,45 @@\n-/**\r\n- * Dynamic Fragment Loader\r\n- *\r\n- * This script demonstrates how to load the 'gate_override_logs.html'\r\n- * fragment (which contains its own styles and script reference)\r\n- * and insert it into a target container on a main page.\r\n- */\r\n+// ==============================\r\n+// gate_overrides.js\r\n+// ==============================\r\n \r\n-// NOTE: This assumes 'manualoverride.html' is in the same directory.\r\n-const FRAGMENT_PATH = './manualoverride.html';\r\n-const TARGET_ELEMENT_ID = 'main-content-area'; // The ID of the div where you want to load the logs\r\n+const API_URL = \"http://localhost:4050/api/gate-overrides\";\r\n+const tableBody = document.querySelector(\"#overridesTable tbody\");\r\n \r\n-/**\r\n- * Fetches the HTML fragment content and injects it into the target container.\r\n- */\r\n-async function loadGateOverrideLogsFragment() {\r\n-    const targetElement = document.getElementById(TARGET_ELEMENT_ID);\r\n-    if (!targetElement) {\r\n-        console.error(`Target element with ID '${TARGET_ELEMENT_ID}' not found.`);\r\n-        return;\r\n-    }\r\n+const loadGateOverrides = async () => {\r\n+    try {\r\n+        tableBody.innerHTML = `<tr><td colspan=\"6\">Loading...</td></tr>`;\r\n \r\n-    // Set a loading state\r\n-    targetElement.innerHTML = `\r\n-        <div class=\"flex justify-center items-center h-64 bg-gray-50\">\r\n-            <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n-            <p class=\"ml-4 text-gray-700\">Loading Dashboard Content...</p>\r\n-        </div>\r\n-    `;\r\n+        const response = await fetch(API_URL);\r\n+        if (!response.ok) throw new Error(\"Failed to fetch overrides\");\r\n \r\n-    try {\r\n-        const response = await fetch(FRAGMENT_PATH);\r\n-        \r\n-        if (!response.ok) {\r\n-            throw new Error(`Failed to load fragment: ${response.statusText}`);\r\n+        const data = await response.json();\r\n+\r\n+        if (data.length === 0) {\r\n+            tableBody.innerHTML = `<tr><td colspan=\"6\">No data found</td></tr>`;\r\n+            return;\r\n         }\r\n \r\n-        const htmlFragment = await response.text();\r\n+        tableBody.innerHTML = \"\";\r\n \r\n-        // Inject the HTML fragment into the target element.\r\n-        // This includes the <script src=\"https://cdn.tailwindcss.com\"></script> and \r\n-        // the <script type=\"module\" src=\"./gate_override_logs.js\"></script> references,\r\n-        // which the browser will then execute automatically.\r\n-        targetElement.innerHTML = htmlFragment;\r\n+        data.forEach(row => {\r\n\\ No newline at end of file\n+            const tr = document.createElement(\"tr\");\r\n \r\n-        console.log('Gate Override Logs fragment loaded successfully.');\r\n+            tr.innerHTML = `\r\n+                <td>${row.id}</td>\r\n+                <td>${row.gateId}</td>\r\n+                <td>${row.action}</td>\r\n+                <td>${row.reason}</td>\r\n+                <td>${row.userId}</td>\r\n+                <td>${new Date(row.createdAt).toLocaleString()}</td>\r\n+            `;\r\n \r\n+            tableBody.appendChild(tr);\r\n+        });\r\n+\r\n     } catch (error) {\r\n-        console.error('Error loading HTML fragment:', error);\r\n-        targetElement.innerHTML = `\r\n-            <div class=\"p-8 bg-red-100 border-l-4 border-red-500 text-red-700\">\r\n-                <p class=\"font-bold\">Error Loading Component</p>\r\n-                <p>Could not load the Gate Override Logs fragment. Check console for details.</p>\r\n-                <p class=\"text-xs mt-2\">Error: ${error.message}</p>\r\n-            </div>\r\n-        `;\r\n+        console.error(\"Error loading gate overrides:\", error);\r\n+        tableBody.innerHTML = `<tr><td colspan=\"6\">Error loading data</td></tr>`;\r\n     }\r\n-}\r\n+};\r\n \r\n-// Call the loader function when the main page is ready\r\n-document.addEventListener('DOMContentLoaded', loadGateOverrideLogsFragment);\n+document.addEventListener(\"DOMContentLoaded\", loadGateOverrides);\r\n"
                }
            ],
            "date": 1763948511948,
            "name": "Commit-0",
            "content": "/**\r\n * Dynamic Fragment Loader\r\n *\r\n * This script demonstrates how to load the 'gate_override_logs.html'\r\n * fragment (which contains its own styles and script reference)\r\n * and insert it into a target container on a main page.\r\n */\r\n\r\n// NOTE: This assumes 'gate_override_logs.html' is in the same directory.\r\nconst FRAGMENT_PATH = './gate_override_logs.html';\r\nconst TARGET_ELEMENT_ID = 'main-content-area'; // The ID of the div where you want to load the logs\r\n\r\n/**\r\n * Fetches the HTML fragment content and injects it into the target container.\r\n */\r\nasync function loadGateOverrideLogsFragment() {\r\n    const targetElement = document.getElementById(TARGET_ELEMENT_ID);\r\n    if (!targetElement) {\r\n        console.error(`Target element with ID '${TARGET_ELEMENT_ID}' not found.`);\r\n        return;\r\n    }\r\n\r\n    // Set a loading state\r\n    targetElement.innerHTML = `\r\n        <div class=\"flex justify-center items-center h-64 bg-gray-50\">\r\n            <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n            <p class=\"ml-4 text-gray-700\">Loading Dashboard Content...</p>\r\n        </div>\r\n    `;\r\n\r\n    try {\r\n        const response = await fetch(FRAGMENT_PATH);\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(`Failed to load fragment: ${response.statusText}`);\r\n        }\r\n\r\n        const htmlFragment = await response.text();\r\n\r\n        // Inject the HTML fragment into the target element.\r\n        // This includes the <script src=\"https://cdn.tailwindcss.com\"></script> and \r\n        // the <script type=\"module\" src=\"./gate_override_logs.js\"></script> references,\r\n        // which the browser will then execute automatically.\r\n        targetElement.innerHTML = htmlFragment;\r\n\r\n        console.log('Gate Override Logs fragment loaded successfully.');\r\n\r\n    } catch (error) {\r\n        console.error('Error loading HTML fragment:', error);\r\n        targetElement.innerHTML = `\r\n            <div class=\"p-8 bg-red-100 border-l-4 border-red-500 text-red-700\">\r\n                <p class=\"font-bold\">Error Loading Component</p>\r\n                <p>Could not load the Gate Override Logs fragment. Check console for details.</p>\r\n                <p class=\"text-xs mt-2\">Error: ${error.message}</p>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n// Call the loader function when the main page is ready\r\ndocument.addEventListener('DOMContentLoaded', loadGateOverrideLogsFragment);"
        }
    ]
}